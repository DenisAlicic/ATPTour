

 

\doxysection*{üë©‚Äçüè≠ worker-\/plugin}



Automatically bundle \& compile Web Workers within Webpack.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22515}{}\doxysubsubsection{Features}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22515}
Automatically compiles modules loaded in Web Workers\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const worker = new Worker('./foo.js', \{ type: 'module' \});}
\DoxyCodeLine{                          \string^\string^\string^\string^\string^\string^\string^\string^\string^\string^}
\DoxyCodeLine{                          gets bundled using webpack}

\end{DoxyCode}


The best part? That worker constructor works just fine without bundling turned on too.

Workers created from Blob \& data URLs or without the `\{ type\+:\textquotesingle{}module' \}\`{} option are left unchanged.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22516}{}\doxysubsection{Installation}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22516}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm install -\/D worker-\/plugin}

\end{DoxyCode}


Then drop it into your {\bfseries{webpack.\+config.\+js\+:}}


\begin{DoxyCode}{0}
\DoxyCodeLine{+ const WorkerPlugin = require('worker-\/plugin');}
\DoxyCodeLine{}
\DoxyCodeLine{module.exports = \{}
\DoxyCodeLine{  <...>}
\DoxyCodeLine{  plugins: [}
\DoxyCodeLine{+    new WorkerPlugin()}
\DoxyCodeLine{  ]}
\DoxyCodeLine{  <...>}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22517}{}\doxysubsection{Usage}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22517}
{\bfseries{worker.\+js}}\+: \+\_\+(our worker module)\+\_\+


\begin{DoxyCode}{0}
\DoxyCodeLine{// This is a module worker, so we can use imports (in the browser too!)}
\DoxyCodeLine{import \{ calculatePi \} from './some-\/other-\/module';}
\DoxyCodeLine{}
\DoxyCodeLine{addEventListener('message', event => \{}
\DoxyCodeLine{  postMessage(calculatePi(event.data));}
\DoxyCodeLine{\});}

\end{DoxyCode}


{\bfseries{main.\+js}}\+: \+\_\+(our demo, on the main thread)\+\_\+


\begin{DoxyCode}{0}
\DoxyCodeLine{const piWorker = new Worker('./worker.js', \{ type: 'module' \});}
\DoxyCodeLine{piWorker.onmessage = event => \{}
\DoxyCodeLine{  console.log('pi: ' + event.data);}
\DoxyCodeLine{\};}
\DoxyCodeLine{piWorker.postMessage(42);}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22518}{}\doxysubsection{Options}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22518}
In most cases, no options are necessary to use Worker\+Plugin.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22519}{}\doxysubsubsection{$<$tt$>$global\+Object$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22519}
Worker\+Plugin will warn you if your Webpack configuration has {\ttfamily output.\+global\+Object} set to {\ttfamily window}, since doing so breaks Hot Module Replacement in web workers.

If you\textquotesingle{}re not using HMR and want to disable this warning, pass {\ttfamily global\+Object\+:false}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{new WorkerPlugin(\{}
\DoxyCodeLine{  // disable warnings about "{}window"{} breaking HMR:}
\DoxyCodeLine{  globalObject: false}
\DoxyCodeLine{\})}

\end{DoxyCode}


To configure the value of {\ttfamily output.\+global\+Object} for Worker\+Plugin\textquotesingle{}s internal Webpack Compiler, set {\ttfamily global\+Object} to any String\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{new WorkerPlugin(\{}
\DoxyCodeLine{  // use "{}self"{} as the global object when receiving hot updates.}
\DoxyCodeLine{  globalObject: 'self' // <-\/-\/ this is the default value}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22520}{}\doxysubsubsection{$<$tt$>$plugins$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22520}
By default, {\ttfamily Worker\+Plugin} doesn\textquotesingle{}t run any of your configured Webpack plugins when bundling worker code -\/ this avoids running things like {\ttfamily html-\/webpack-\/plugin} twice. For cases where it\textquotesingle{}s necessary to apply a plugin to Worker code, use the {\ttfamily plugins} option.

Here you can specify the names of plugins to \char`\"{}copy\char`\"{} from your existing Webpack configuration, or provide specific plugins to apply only to worker code\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{module.exports = \{}
\DoxyCodeLine{  <...>}
\DoxyCodeLine{  plugins: [}
\DoxyCodeLine{    // an example of a plugin already being used:}
\DoxyCodeLine{    new SomeExistingPlugin(\{ <...> \}),}
\DoxyCodeLine{}
\DoxyCodeLine{    new WorkerPlugin(\{}
\DoxyCodeLine{      plugins: [}
\DoxyCodeLine{        // A string here will copy the named plugin from your configuration:}
\DoxyCodeLine{        'SomeExistingPlugin',}
\DoxyCodeLine{        }
\DoxyCodeLine{        // Or you can specify a plugin directly, only applied to Worker code:}
\DoxyCodeLine{        new SomePluginToApplyOnlyToWorkers(\{ <...> \})}
\DoxyCodeLine{      ]}
\DoxyCodeLine{    \})}
\DoxyCodeLine{  ]}
\DoxyCodeLine{  <...>}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22521}{}\doxysubsection{License}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_worker_plugin_README_autotoc_md22521}
Apache-\/2.\+0 