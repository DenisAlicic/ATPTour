Library to do the things that \textquotesingle{}npm version\textquotesingle{} does.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14902}{}\doxysection{USAGE}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14902}

\begin{DoxyCode}{0}
\DoxyCodeLine{const npmVersion = require('libnpmversion')}
\DoxyCodeLine{}
\DoxyCodeLine{// argument can be one of:}
\DoxyCodeLine{// -\/ any semver version string (set to that exact version)}
\DoxyCodeLine{// -\/ 'major', 'minor', 'patch', 'pre\{major,minor,patch\}' (increment at}
\DoxyCodeLine{//   that value)}
\DoxyCodeLine{// -\/ 'from-\/git' (set to the latest semver-\/lookin git tag -\/ this skips}
\DoxyCodeLine{//   gitTagVersion, but will still sign if asked)}
\DoxyCodeLine{npmVersion(arg, \{}
\DoxyCodeLine{  path: '/path/to/my/pkg', // defaults to cwd}
\DoxyCodeLine{}
\DoxyCodeLine{  allowSameVersion: false, // allow tagging/etc to the current version}
\DoxyCodeLine{  preid: '', // when arg=='pre', define the prerelease string, like 'beta' etc.}
\DoxyCodeLine{  tagVersionPrefix: 'v', // tag as 'v1.2.3' when versioning to 1.2.3}
\DoxyCodeLine{  commitHooks: true, // default true, run git commit hooks, default true}
\DoxyCodeLine{  gitTagVersion: true, // default true, tag the version}
\DoxyCodeLine{  signGitCommit: false, // default false, gpg sign the git commit}
\DoxyCodeLine{  signGitTag: false, // default false, gpg sign the git tag}
\DoxyCodeLine{  force: false, // push forward recklessly if any problems happen}
\DoxyCodeLine{  ignoreScripts: false, // do not run pre/post/version lifecycle scripts}
\DoxyCodeLine{  scriptShell: '/bin/bash', // shell to run lifecycle scripts in}
\DoxyCodeLine{  message: 'v\%s', // message for tag and commit, replace \%s with the version}
\DoxyCodeLine{\}).then(newVersion => \{}
\DoxyCodeLine{  console.error('version updated!', newVersion)}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14903}{}\doxysection{Description}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14903}
Run this in a package directory to bump the version and write the new data back to {\ttfamily package.\+json}, {\ttfamily package-\/lock.\+json}, and, if present, {\ttfamily npm-\/shrinkwrap.\+json}.

The {\ttfamily newversion} argument should be a valid semver string, a valid second argument to \href{https://github.com/npm/node-semver\#functions}{\texttt{ semver.\+inc}} (one of {\ttfamily patch}, {\ttfamily minor}, {\ttfamily major}, {\ttfamily prepatch}, {\ttfamily preminor}, {\ttfamily premajor}, {\ttfamily prerelease}), or {\ttfamily from-\/git}. In the second case, the existing version will be incremented by 1 in the specified field. {\ttfamily from-\/git} will try to read the latest git tag, and use that as the new npm version.

If run in a git repo, it will also create a version commit and tag. This behavior is controlled by {\ttfamily git\+Tag\+Version} (see below), and can be disabled by setting {\ttfamily git\+Tag\+Version\+: false} in the options. It will fail if the working directory is not clean, unless {\ttfamily force\+: true} is set.

If supplied with a {\ttfamily message} string option, it will use it as a commit message when creating a version commit. If the {\ttfamily message} option contains {\ttfamily s} then that will be replaced with the resulting version number.

If the {\ttfamily sign\+Git\+Tag} option is set, then the tag will be signed using the {\ttfamily -\/s} flag to git. Note that you must have a default GPG key set up in your git config for this to work properly.

If {\ttfamily preversion}, {\ttfamily version}, or {\ttfamily postversion} are in the {\ttfamily scripts} property of the package.\+json, they will be executed in the appropriate sequence.

The exact order of execution is as follows\+:


\begin{DoxyEnumerate}
\item Check to make sure the git working directory is clean before we get started. Your scripts may add files to the commit in future steps. This step is skipped if the {\ttfamily force} flag is set.
\item Run the {\ttfamily preversion} script. These scripts have access to the old {\ttfamily version} in package.\+json. A typical use would be running your full test suite before deploying. Any files you want added to the commit should be explicitly added using {\ttfamily git add}.
\item Bump {\ttfamily version} in {\ttfamily package.\+json} as requested ({\ttfamily patch}, {\ttfamily minor}, {\ttfamily major}, explicit version number, etc).
\item Run the {\ttfamily version} script. These scripts have access to the new {\ttfamily version} in package.\+json (so they can incorporate it into file headers in generated files for example). Again, scripts should explicitly add generated files to the commit using {\ttfamily git add}.
\item Commit and tag.
\item Run the {\ttfamily postversion} script. Use it to clean up the file system or automatically push the commit and/or tag.
\end{DoxyEnumerate}

Take the following example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  "{}scripts"{}: \{}
\DoxyCodeLine{    "{}preversion"{}: "{}npm test"{},}
\DoxyCodeLine{    "{}version"{}: "{}npm run build \&\& git add -\/A dist"{},}
\DoxyCodeLine{    "{}postversion"{}: "{}git push \&\& git push -\/-\/tags \&\& rm -\/rf build/temp"{}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


This runs all your tests, and proceeds only if they pass. Then runs your {\ttfamily build} script, and adds everything in the {\ttfamily dist} directory to the commit. After the commit, it pushes the new commit and tag up to the server, and deletes the {\ttfamily build/temp} directory.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14904}{}\doxysection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14904}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14905}{}\doxysubsection{$<$tt$>$npm\+Version(newversion, options = \{\}) -\/$>$ Promise$<$\+String$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14905}
Do the things. Returns a promise that resolves to the new version if all is well, or rejects if any errors are encountered.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14906}{}\doxysubsection{Options}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14906}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14907}{}\doxysubsubsection{$<$tt$>$path$<$/tt$>$ String}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14907}
The path to the package being versionified. Defaults to \mbox{\hyperlink{namespaceupdate-gyp_a353f325a85a850b0456a7cbaff8fc43b}{process.\+cwd()}}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14908}{}\doxysubsubsection{$<$tt$>$allow\+Same\+Version$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14908}
Allow setting the version to the current version in package.\+json. Default {\ttfamily false}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14909}{}\doxysubsubsection{$<$tt$>$preid$<$/tt$>$ String}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14909}
When the {\ttfamily newversion} is pre, premajor, preminor, or prepatch, this defines the prerelease string, like \textquotesingle{}beta\textquotesingle{} etc.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14910}{}\doxysubsubsection{$<$tt$>$tag\+Version\+Prefix$<$/tt$>$ String}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14910}
The prefix to add to the raw semver string for the tag name. Defaults to `\textquotesingle{}v'`. (So, by default it tags as \textquotesingle{}v1.\+2.\+3' when versioning to 1.\+2.\+3.)\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14911}{}\doxysubsubsection{$<$tt$>$commit\+Hooks$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14911}
Run git commit hooks. Default true.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14912}{}\doxysubsubsection{$<$tt$>$git\+Tag\+Version$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14912}
Tag the version, default true.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14913}{}\doxysubsubsection{$<$tt$>$sign\+Git\+Commit$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14913}
GPG sign the git commit. Default {\ttfamily false}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14914}{}\doxysubsubsection{$<$tt$>$sign\+Git\+Tag$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14914}
GPG sign the git tag. Default {\ttfamily false}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14915}{}\doxysubsubsection{$<$tt$>$force$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14915}
Push forward recklessly if any problems happen. Default {\ttfamily false}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14916}{}\doxysubsubsection{$<$tt$>$ignore\+Scripts$<$/tt$>$ Boolean}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14916}
Do not run pre/post/version lifecycle scripts. Default {\ttfamily false}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14917}{}\doxysubsubsection{$<$tt$>$script\+Shell$<$/tt$>$ String}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14917}
Path to the shell, which should execute the lifecycle scripts. Defaults to {\ttfamily /bin/sh} on unix, or {\ttfamily cmd.\+exe} on windows.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14918}{}\doxysubsubsection{$<$tt$>$message$<$/tt$>$ String}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules5b1551e90011b35197c72ce8a1fe2921_autotoc_md14918}
The message for the git commit and annotated git tag that are created. 