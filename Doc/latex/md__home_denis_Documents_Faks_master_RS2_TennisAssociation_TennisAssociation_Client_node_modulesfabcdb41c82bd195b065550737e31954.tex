Provides functions for fetching and updating an npmjs.\+com profile.


\begin{DoxyCode}{0}
\DoxyCodeLine{const profile = require('npm-\/profile')}
\DoxyCodeLine{const result = await profile.get(registry, \{token\})}
\DoxyCodeLine{//...}

\end{DoxyCode}


The API that this implements is documented here\+:


\begin{DoxyItemize}
\item \href{https://github.com/npm/registry/blob/master/docs/user/authentication.md}{\texttt{ authentication}}
\item \href{https://github.com/npm/registry/blob/master/docs/user/profile.md}{\texttt{ profile editing}} (and two-\/factor authentication)
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13096}{}\doxysection{Table of Contents}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13096}

\begin{DoxyItemize}
\item \href{\#api}{\texttt{ API}}
\begin{DoxyItemize}
\item Login and Account Creation
\begin{DoxyItemize}
\item \href{\#adduser}{\texttt{ {\ttfamily adduser()}}}
\item \href{\#login}{\texttt{ {\ttfamily login()}}}
\item \href{\#adduser-web}{\texttt{ {\ttfamily adduser\+Web()}}}
\item \href{\#login-web}{\texttt{ {\ttfamily login\+Web()}}}
\item \href{\#adduser-couch}{\texttt{ {\ttfamily adduser\+Couch()}}}
\item \href{\#login-couch}{\texttt{ {\ttfamily login\+Couch()}}}
\end{DoxyItemize}
\item Profile Data Management
\begin{DoxyItemize}
\item \href{\#get}{\texttt{ {\ttfamily get()}}}
\item \href{\#set}{\texttt{ {\ttfamily set()}}}
\end{DoxyItemize}
\item Token Management
\begin{DoxyItemize}
\item \href{\#list-tokens}{\texttt{ {\ttfamily list\+Tokens()}}}
\item \href{\#remove-token}{\texttt{ {\ttfamily remove\+Token()}}}
\item \href{\#create-token}{\texttt{ {\ttfamily create\+Token()}}}
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13097}{}\doxysection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13097}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13098}{}\doxysubsection{$<$a name=\char`\"{}adduser\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+adduser(opener, prompter, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13098}
Tries to create a user new web based login, if that fails it falls back to using the legacy Couch\+DB APIs.


\begin{DoxyItemize}
\item {\ttfamily opener} Function (url) → Promise, returns a promise that resolves after a browser has been opened for the user at {\ttfamily url}.
\item {\ttfamily prompter} Function (creds) → Promise, returns a promise that resolves to an object with {\ttfamily username}, {\ttfamily email} and {\ttfamily password} properties.
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13099}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13099}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13100}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13100}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be `\textquotesingle{}E'{\ttfamily followed by the HTTP response code, for example a Forbidden response would be}E403\`{}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13101}{}\doxysubsection{$<$a name=\char`\"{}login\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+login(opener, prompter, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13101}
Tries to login using new web based login, if that fails it falls back to using the legacy Couch\+DB APIs.


\begin{DoxyItemize}
\item {\ttfamily opener} Function (url) → Promise, returns a promise that resolves after a browser has been opened for the user at {\ttfamily url}.
\item {\ttfamily prompter} Function (creds) → Promise, returns a promise that resolves to an object with {\ttfamily username}, and {\ttfamily password} properties.
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13102}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13102}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13103}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13103}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}. This error code can only come from a legacy Couch\+DB login and so this should be retried with login\+Couch.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be `\textquotesingle{}E'{\ttfamily followed by the HTTP response code, for example a Forbidden response would be}E403\`{}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13104}{}\doxysubsection{$<$a name=\char`\"{}adduser-\/web\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+adduser\+Web(opener, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13104}
Tries to create a user new web based login, if that fails it falls back to using the legacy Couch\+DB APIs.


\begin{DoxyItemize}
\item {\ttfamily opener} Function (url) → Promise, returns a promise that resolves after a browser has been opened for the user at {\ttfamily url}.
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13105}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13105}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13106}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13106}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the registry does not support web-\/login then an error will be thrown with its {\ttfamily code} property set to {\ttfamily ENYI} . You should retry with {\ttfamily adduser\+Couch}. If you use {\ttfamily adduser} then this fallback will be done automatically.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be `\textquotesingle{}E'{\ttfamily followed by the HTTP response code, for example a Forbidden response would be}E403\`{}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13107}{}\doxysubsection{$<$a name=\char`\"{}login-\/web\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+login\+Web(opener, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13107}
Tries to login using new web based login, if that fails it falls back to using the legacy Couch\+DB APIs.


\begin{DoxyItemize}
\item {\ttfamily opener} Function (url) → Promise, returns a promise that resolves after a browser has been opened for the user at {\ttfamily url}.
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13108}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13108}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13109}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13109}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the registry does not support web-\/login then an error will be thrown with its {\ttfamily code} property set to {\ttfamily ENYI} . You should retry with {\ttfamily login\+Couch}. If you use {\ttfamily login} then this fallback will be done automatically.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be `\textquotesingle{}E'{\ttfamily followed by the HTTP response code, for example a Forbidden response would be}E403\`{}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13110}{}\doxysubsection{$<$a name=\char`\"{}adduser-\/couch\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+adduser\+Couch(username, email, password, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13110}

\begin{DoxyCode}{0}
\DoxyCodeLine{const \{token\} = await profile.adduser(username, email, password, \{registry\})}
\DoxyCodeLine{// `token` can be passed in through `opts` for authentication.}

\end{DoxyCode}


Creates a new user on the server along with a fresh bearer token for future authentication as this user. This is what you see as an {\ttfamily auth\+Token} in an {\ttfamily .npmrc}.

If the user already exists then the npm registry will return an error, but this is registry specific and not guaranteed.


\begin{DoxyItemize}
\item {\ttfamily username} String
\item {\ttfamily email} String
\item {\ttfamily password} String
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13111}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13111}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13112}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13112}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be `\textquotesingle{}E'{\ttfamily followed by the HTTP response code, for example a Forbidden response would be}E403\`{}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13113}{}\doxysubsection{$<$a name=\char`\"{}login-\/couch\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+login\+Couch(username, password, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13113}

\begin{DoxyCode}{0}
\DoxyCodeLine{let token}
\DoxyCodeLine{try \{}
\DoxyCodeLine{  \{token\} = await profile.login(username, password, \{registry\})}
\DoxyCodeLine{\} catch (err) \{}
\DoxyCodeLine{  if (err.code === 'otp') \{}
\DoxyCodeLine{    const otp = await getOTPFromSomewhere()}
\DoxyCodeLine{    \{token\} = await profile.login(username, password, \{otp\})}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{// `token` can now be passed in through `opts` for authentication.}

\end{DoxyCode}


Logs you into an existing user. Does not create the user if they do not already exist. Logging in means generating a new bearer token for use in future authentication. This is what you use as an {\ttfamily auth\+Token} in an {\ttfamily .npmrc}.


\begin{DoxyItemize}
\item {\ttfamily username} String
\item {\ttfamily email} String
\item {\ttfamily password} String
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13114}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13114}
An object with the following properties\+:


\begin{DoxyItemize}
\item {\ttfamily token} String, to be used to authenticate further API calls
\item {\ttfamily username} String, the username the user authenticated as
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13115}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13115}
An error object indicating what went wrong.

If the object has a {\ttfamily code} property set to {\ttfamily EOTP} then that indicates that this account must use two-\/factor authentication to login. Try again with a one-\/time password.

If the object has a {\ttfamily code} property set to {\ttfamily EAUTHIP} then that indicates that this account is only allowed to login from certain networks and this ip is not on one of those networks.

If the error was neither of these then the error object will have a {\ttfamily code} property set to the HTTP response code and a {\ttfamily headers} property with the HTTP headers in the response.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13116}{}\doxysubsection{$<$a name=\char`\"{}get\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+get(\mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13116}

\begin{DoxyCode}{0}
\DoxyCodeLine{const \{name, email\} = await profile.get(\{token\})}
\DoxyCodeLine{console.log(`\$\{token\} belongs to https://npm.im/\string~\$\{name\}, (mailto:\$\{email\})`)}

\end{DoxyCode}


Fetch profile information for the authenticated user.


\begin{DoxyItemize}
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13117}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13117}
An object that looks like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{// "{}*"{} indicates a field that may not always appear}
\DoxyCodeLine{\{}
\DoxyCodeLine{  tfa: null |}
\DoxyCodeLine{       false |}
\DoxyCodeLine{       \{"{}mode"{}: "{}auth-\/only"{}, pending: Boolean\} |}
\DoxyCodeLine{       ["{}recovery"{}, "{}codes"{}] |}
\DoxyCodeLine{       "{}otpauth://..."{},}
\DoxyCodeLine{  name: String,}
\DoxyCodeLine{  email: String,}
\DoxyCodeLine{  email\_verified: Boolean,}
\DoxyCodeLine{  created: Date,}
\DoxyCodeLine{  updated: Date,}
\DoxyCodeLine{  cidr\_whitelist: null | ["{}192.168.1.1/32"{}, ...],}
\DoxyCodeLine{  fullname: String, // *}
\DoxyCodeLine{  homepage: String, // *}
\DoxyCodeLine{  freenode: String, // *}
\DoxyCodeLine{  twitter: String,  // *}
\DoxyCodeLine{  github: String    // *}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13118}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13118}
An error object indicating what went wrong.

The {\ttfamily headers} property will contain the HTTP headers of the response.

If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.

If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.

Otherwise the code will be the HTTP response code.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13119}{}\doxysubsection{$<$a name=\char`\"{}set\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+set(profile\+Data, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13119}

\begin{DoxyCode}{0}
\DoxyCodeLine{await profile.set(\{github: 'great-\/github-\/account-\/name'\}, \{token\})}

\end{DoxyCode}


Update profile information for the authenticated user.


\begin{DoxyItemize}
\item {\ttfamily profile\+Data} An object, like that returned from {\ttfamily profile.\+get}, but see below for caveats relating to {\ttfamily password}, {\ttfamily tfa} and {\ttfamily cidr\+\_\+whitelist}.
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13120}{}\doxysubsubsection{$<$strong$>$\+SETTING $<$tt$>$password$<$/tt$>$$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13120}
This is used to change your password and is not visible (for obvious reasons) through the {\ttfamily get()} API. The value should be an object with {\ttfamily old} and {\ttfamily new} properties, where the former has the user\textquotesingle{}s current password and the latter has the desired new password. For example


\begin{DoxyCode}{0}
\DoxyCodeLine{await profile.set(\{}
\DoxyCodeLine{  password: \{}
\DoxyCodeLine{    old: 'abc123',}
\DoxyCodeLine{    new: 'my new (more secure) password'}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}, \{token\})}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13121}{}\doxysubsubsection{$<$strong$>$\+SETTING $<$tt$>$cidr\+\_\+whitelist$<$/tt$>$$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13121}
The value for this is an Array. Only valid CIDR ranges are allowed in it. Be very careful as it\textquotesingle{}s possible to lock yourself out of your account with this. This is not currently exposed in {\ttfamily npm} itself.


\begin{DoxyCode}{0}
\DoxyCodeLine{await profile.set(\{}
\DoxyCodeLine{  cidr\_whitelist: [ '8.8.8.8/32' ]}
\DoxyCodeLine{\}, \{token\})}
\DoxyCodeLine{// ↑ only one of google's dns servers can now access this account.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13122}{}\doxysubsubsection{$<$strong$>$\+SETTING $<$tt$>$tfa$<$/tt$>$$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13122}
Enabling two-\/factor authentication is a multi-\/step process.


\begin{DoxyEnumerate}
\item Call {\ttfamily profile.\+get} and check the status of {\ttfamily tfa}. If {\ttfamily pending} is true then you\textquotesingle{}ll need to disable it with `profile.\+set(\{tfa\+: \{password, mode\+: \textquotesingle{}disable'\}, …){\ttfamily . 2.}profile.\+set(\{tfa\+: \{password, mode\}\}, \{registry, token\}){\ttfamily 
\begin{DoxyItemize}
\item Note that the user\textquotesingle{}spassword{\ttfamily is required here in the}tfa\`{} object, regardless of how you\textquotesingle{}re authenticating.
\item {\ttfamily mode} is either {\ttfamily auth-\/only} which requires an {\ttfamily otp} when calling {\ttfamily login} or {\ttfamily create\+Token}, or {\ttfamily mode} is {\ttfamily auth-\/and-\/writes} and an {\ttfamily otp} will be required on login, publishing or when granting others access to your modules.
\item Be aware that this set call may require otp as part of the auth object. If otp is needed it will be indicated through a rejection in the usual way.
\end{DoxyItemize}}
\item {\ttfamily If tfa was already enabled then you\textquotesingle{}re just switch modes and a successful response means that you\textquotesingle{}re done. If the tfa property is empty and tfa {\itshape wasn\textquotesingle{}t} enabled then it means they were in a pending state.}
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item {\ttfamily The response will have a {\ttfamily tfa} property set to an {\ttfamily otpauth} URL, as \href{https://github.com/google/google-authenticator/wiki/Key-Uri-Format}{\texttt{ used by Google Authenticator}}. You will need to show this to the user for them to add to their authenticator application. This is typically done as a QRCODE, but you can also show the value of the {\ttfamily secret} key in the {\ttfamily otpauth} query string and they can type or copy paste that in.}
\item {\ttfamily To complete setting up two factor auth you need to make a second call to {\ttfamily profile.\+set} with {\ttfamily tfa} set to an array of TWO codes from the user\textquotesingle{}s authenticator, eg\+: {\ttfamily profile.\+set(tfa\+: \mbox{[}otp1, otp2\mbox{]}\}, \{registry, token\})}}
\item {\ttfamily On success you\textquotesingle{}ll get a result object with a {\ttfamily tfa} property that has an array of one-\/time-\/use recovery codes. These are used to authenticate later if the second factor is lost and generally should be printed and put somewhere safe.}
\end{DoxyEnumerate}

{\ttfamily Disabling two-\/factor authentication is more straightforward, set the {\ttfamily tfa} attribute to an object with a {\ttfamily password} property and a {\ttfamily mode} of {\ttfamily disable}.}

{\ttfamily 
\begin{DoxyCode}{0}
\DoxyCodeLine{await profile.set(\{tfa: \{password, mode: 'disable'\}\}, \{token\})}

\end{DoxyCode}
}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13123}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13123}
{\ttfamily  An object reflecting the changes you made, see description for {\ttfamily profile.\+get}.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13124}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13124}
{\ttfamily  An error object indicating what went wrong.}

{\ttfamily The {\ttfamily headers} property will contain the HTTP headers of the response.}

{\ttfamily If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.}

{\ttfamily If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.}

{\ttfamily Otherwise the code will be the HTTP response code.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13125}{}\doxysubsection{$<$a name=\char`\"{}list-\/tokens\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+list\+Tokens(\mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13125}
{\ttfamily  
\begin{DoxyCode}{0}
\DoxyCodeLine{const tokens = await profile.listTokens(\{registry, token\})}
\DoxyCodeLine{console.log(`Number of tokens in your accounts: \$\{tokens.length\}`)}

\end{DoxyCode}
}

{\ttfamily Fetch a list of all of the authentication tokens the authenticated user has.}

{\ttfamily 
\begin{DoxyItemize}
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13126}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13126}
{\ttfamily  An array of token objects. Each token object has the following properties\+:}

{\ttfamily 
\begin{DoxyItemize}
\item key — A sha512 that can be used to remove this token.
\item token — The first six characters of the token UUID. This should be used by the user to identify which token this is.
\item created — The date and time the token was created
\item readonly — If true, this token can only be used to download private modules. Critically, it CAN NOT be used to publish.
\item cidr\+\_\+whitelist — An array of CIDR ranges that this token is allowed to be used from.
\end{DoxyItemize}}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13127}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13127}
{\ttfamily  An error object indicating what went wrong.}

{\ttfamily The {\ttfamily headers} property will contain the HTTP headers of the response.}

{\ttfamily If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.}

{\ttfamily If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.}

{\ttfamily Otherwise the code will be the HTTP response code.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13128}{}\doxysubsection{$<$a name=\char`\"{}remove-\/token\char`\"{}$>$$<$a$>$ $<$tt$>$$>$ profile.\+remove\+Token(token$\vert$key, opts) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13128}
{\ttfamily  
\begin{DoxyCode}{0}
\DoxyCodeLine{await profile.removeToken(key, \{token\})}
\DoxyCodeLine{// token is gone!}

\end{DoxyCode}
}

{\ttfamily Remove a specific authentication token.}

{\ttfamily 
\begin{DoxyItemize}
\item {\ttfamily token$\vert$key} String, either a complete authentication token or the key returned by {\ttfamily profile.\+list\+Tokens}.
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object (optional)
\end{DoxyItemize}}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13129}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13129}
{\ttfamily  No value.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13130}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13130}
{\ttfamily  An error object indicating what went wrong.}

{\ttfamily The {\ttfamily headers} property will contain the HTTP headers of the response.}

{\ttfamily If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.}

{\ttfamily If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.}

{\ttfamily Otherwise the code will be the HTTP response code.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13131}{}\doxysubsection{$<$a name=\char`\"{}create-\/token\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ profile.\+create\+Token(password, readonly, cidr\+\_\+whitelist, \mbox{[}opts\mbox{]}) → Promise$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13131}
{\ttfamily  
\begin{DoxyCode}{0}
\DoxyCodeLine{const newToken = await profile.createToken(}
\DoxyCodeLine{  password, readonly, cidr\_whitelist, \{token, otp\}}
\DoxyCodeLine{)}
\DoxyCodeLine{// do something with the newToken}

\end{DoxyCode}
}

{\ttfamily Create a new authentication token, possibly with restrictions.}

{\ttfamily 
\begin{DoxyItemize}
\item {\ttfamily password} String
\item {\ttfamily readonly} Boolean
\item {\ttfamily cidr\+\_\+whitelist} Array
\item \href{\#opts}{\texttt{ {\ttfamily opts}}} Object Optional
\end{DoxyItemize}}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13132}{}\doxysubsubsection{$<$strong$>$\+Promise Value$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13132}
{\ttfamily  The promise will resolve with an object very much like the one\textquotesingle{}s returned by {\ttfamily profile.\+list\+Tokens}. The only difference is that {\ttfamily token} is not truncated.}

{\ttfamily 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  token: String,}
\DoxyCodeLine{  key: String,    // sha512 hash of the token UUID}
\DoxyCodeLine{  cidr\_whitelist: [String],}
\DoxyCodeLine{  created: Date,}
\DoxyCodeLine{  readonly: Boolean}
\DoxyCodeLine{\}}

\end{DoxyCode}
}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13133}{}\doxysubsubsection{$<$strong$>$\+Promise Rejection$<$/strong$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13133}
{\ttfamily  An error object indicating what went wrong.}

{\ttfamily The {\ttfamily headers} property will contain the HTTP headers of the response.}

{\ttfamily If the action was denied because an OTP is required then {\ttfamily code} will be set to {\ttfamily EOTP}.}

{\ttfamily If the action was denied because it came from an IP address that this action on this account isn\textquotesingle{}t allowed from then the {\ttfamily code} will be set to {\ttfamily EAUTHIP}.}

{\ttfamily Otherwise the code will be the HTTP response code.}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13134}{}\doxysubsection{$<$a name=\char`\"{}opts\char`\"{}$>$$<$/a$>$ options objects}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13134}
{\ttfamily  The various API functions accept an optional {\ttfamily opts} object as a final argument.}

{\ttfamily Options are passed to \href{https://www.npmjs.com/package/npm-registry-fetch\#fetch-opts}{\texttt{ {\ttfamily npm-\/registry-\/fetch} options}}, so anything provided to this module will affect the behavior of that one as well.}

{\ttfamily Of particular note are {\ttfamily opts.\+registry}, and the auth-\/related options\+:}

{\ttfamily 
\begin{DoxyItemize}
\item {\ttfamily opts.\+creds} Object, passed through to prompter, common values are\+:
\begin{DoxyItemize}
\item {\ttfamily username} String, default value for username
\item {\ttfamily email} String, default value for email
\end{DoxyItemize}
\item {\ttfamily opts.\+username} and {\ttfamily opts.\+password} -\/ used for Basic auth
\item {\ttfamily opts.\+otp} String, the two-\/factor-\/auth one-\/time-\/password (Will prompt for this if needed and not provided.)
\item {\ttfamily opts.\+hostname} String, the hostname of the current machine, to show the user during the Web\+Auth flow. (Defaults to {\ttfamily os.\+hostname()}.)
\end{DoxyItemize}}

{\ttfamily }\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13135}{}\doxysection{$<$a name=\char`\"{}logging\char`\"{}$>$$<$/a$>$ Logging}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modulesfabcdb41c82bd195b065550737e31954_autotoc_md13135}
{\ttfamily  This modules logs by emitting {\ttfamily log} events on the global {\ttfamily process} object. These events look like this\+:}

{\ttfamily 
\begin{DoxyCode}{0}
\DoxyCodeLine{process.emit('log', 'loglevel', 'feature', 'message part 1', 'part 2', 'part 3', 'etc')}

\end{DoxyCode}
}

{\ttfamily {\ttfamily loglevel} can be one of\+: {\ttfamily error}, {\ttfamily warn}, {\ttfamily notice}, {\ttfamily http}, {\ttfamily timing}, {\ttfamily info}, {\ttfamily verbose}, and {\ttfamily silly}.}

{\ttfamily {\ttfamily feature} is any brief string that describes the component doing the logging.}

{\ttfamily The remaining arguments are evaluated like {\ttfamily console.\+log} and joined together with spaces.}

{\ttfamily A real world example of this is\+:}

{\ttfamily 
\begin{DoxyCode}{0}
\DoxyCodeLine{process.emit('log', 'http', 'request', '→', conf.method || 'GET', conf.target)}

\end{DoxyCode}
}

{\ttfamily To handle the log events, you would do something like this\+:}

{\ttfamily 
\begin{DoxyCode}{0}
\DoxyCodeLine{const log = require('npmlog')}
\DoxyCodeLine{process.on('log', function (level) \{}
\DoxyCodeLine{  return log[level].apply(log, [].slice.call(arguments, 1))}
\DoxyCodeLine{\})}

\end{DoxyCode}
 }