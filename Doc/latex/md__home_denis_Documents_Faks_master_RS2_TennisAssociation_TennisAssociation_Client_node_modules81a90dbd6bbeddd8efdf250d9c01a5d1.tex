Inspect and manage {\ttfamily node\+\_\+modules} trees.



There\textquotesingle{}s more documentation \href{https://github.com/npm/arborist/tree/main/notes}{\texttt{ in the notes folder}}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15418}{}\doxysection{USAGE}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15418}

\begin{DoxyCode}{0}
\DoxyCodeLine{const Arborist = require('@npmcli/arborist')}
\DoxyCodeLine{}
\DoxyCodeLine{const arb = new Arborist(\{}
\DoxyCodeLine{  // options object}
\DoxyCodeLine{}
\DoxyCodeLine{  // where we're doing stuff.  defaults to cwd.}
\DoxyCodeLine{  path: '/path/to/package/root',}
\DoxyCodeLine{}
\DoxyCodeLine{  // url to the default registry.  defaults to npm's default registry}
\DoxyCodeLine{  registry: 'https://registry.npmjs.org',}
\DoxyCodeLine{}
\DoxyCodeLine{  // scopes can be mapped to a different registry}
\DoxyCodeLine{  '@foo:registry': 'https://registry.foo.com/',}
\DoxyCodeLine{}
\DoxyCodeLine{  // Auth can be provided in a couple of different ways.  If none are}
\DoxyCodeLine{  // provided, then requests are anonymous, and private packages will 404.}
\DoxyCodeLine{  // Arborist doesn't do anything with these, it just passes them down}
\DoxyCodeLine{  // the chain to pacote and npm-\/registry-\/fetch.}
\DoxyCodeLine{}
\DoxyCodeLine{  // Safest: a bearer token provided by a registry:}
\DoxyCodeLine{  // 1. an npm auth token, used with the default registry}
\DoxyCodeLine{  token: 'deadbeefcafebad',}
\DoxyCodeLine{  // 2. an alias for the same thing:}
\DoxyCodeLine{  \_authToken: 'deadbeefcafebad',}
\DoxyCodeLine{}
\DoxyCodeLine{  // insecure options:}
\DoxyCodeLine{  // 3. basic auth, username:password, base64 encoded}
\DoxyCodeLine{  auth: 'aXNhYWNzOm5vdCBteSByZWFsIHBhc3N3b3Jk',}
\DoxyCodeLine{  // 4. username and base64 encoded password}
\DoxyCodeLine{  username: 'isaacs',}
\DoxyCodeLine{  password: 'bm90IG15IHJlYWwgcGFzc3dvcmQ=',}
\DoxyCodeLine{}
\DoxyCodeLine{  // auth configs can also be scoped to a given registry with this}
\DoxyCodeLine{  // rather unusual pattern:}
\DoxyCodeLine{  '//registry.foo.com:token': 'blahblahblah',}
\DoxyCodeLine{  '//basic.auth.only.foo.com:\_auth': 'aXNhYWNzOm5vdCBteSByZWFsIHBhc3N3b3Jk',}
\DoxyCodeLine{  '//registry.foo.com:always-\/auth': true,}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// READING}
\DoxyCodeLine{}
\DoxyCodeLine{// returns a promise.  reads the actual contents of node\_modules}
\DoxyCodeLine{arb.loadActual().then(tree => \{}
\DoxyCodeLine{  // tree is also stored at arb.virtualTree}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// read just what the package-\/lock.json/npm-\/shrinkwrap says}
\DoxyCodeLine{// This *also* loads the yarn.lock file, but that's only relevant}
\DoxyCodeLine{// when building the ideal tree.}
\DoxyCodeLine{arb.loadVirtual().then(tree => \{}
\DoxyCodeLine{  // tree is also stored at arb.virtualTree}
\DoxyCodeLine{  // now arb.virtualTree is loaded}
\DoxyCodeLine{  // this fails if there's no package-\/lock.json or package.json in the folder}
\DoxyCodeLine{  // note that loading this way should only be done if there's no}
\DoxyCodeLine{  // node\_modules folder}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// OPTIMIZING AND DESIGNING}
\DoxyCodeLine{}
\DoxyCodeLine{// build an ideal tree from the package.json and various lockfiles.}
\DoxyCodeLine{arb.buildIdealTree(options).then(() => \{}
\DoxyCodeLine{  // next step is to reify that ideal tree onto disk.}
\DoxyCodeLine{  // options can be:}
\DoxyCodeLine{  // rm: array of package names to remove at top level}
\DoxyCodeLine{  // add: Array of package specifiers to add at the top level.  Each of}
\DoxyCodeLine{  //   these will be resolved with pacote.manifest if the name can't be}
\DoxyCodeLine{  //   determined from the spec.  (Eg, `github:foo/bar` vs `foo@somespec`.)}
\DoxyCodeLine{  //   The dep will be saved in the location where it already exists,}
\DoxyCodeLine{  //   (or pkg.dependencies) unless a different saveType is specified.}
\DoxyCodeLine{  // saveType: Save added packages in a specific dependency set.}
\DoxyCodeLine{  //   -\/ null (default) Wherever they exist already, or 'dependencies'}
\DoxyCodeLine{  //   -\/ prod: definitely in 'dependencies'}
\DoxyCodeLine{  //   -\/ optional: in 'optionalDependencies'}
\DoxyCodeLine{  //   -\/ dev: devDependencies}
\DoxyCodeLine{  //   -\/ peer: save in peerDependencies, and remove any optional flag from}
\DoxyCodeLine{  //     peerDependenciesMeta if one exists}
\DoxyCodeLine{  //   -\/ peerOptional: save in peerDependencies, and add a}
\DoxyCodeLine{  //     peerDepsMeta[name].optional flag}
\DoxyCodeLine{  // saveBundle: add newly added deps to the bundleDependencies list}
\DoxyCodeLine{  // update: Either `true` to just go ahead and update everything, or an}
\DoxyCodeLine{  //   object with any or all of the following fields:}
\DoxyCodeLine{  //   -\/ all: boolean.  set to true to just update everything}
\DoxyCodeLine{  //   -\/ names: names of packages update (like `npm update foo`)}
\DoxyCodeLine{  // prune: boolean, default true.  Prune extraneous nodes from the tree.}
\DoxyCodeLine{  // preferDedupe: prefer to deduplicate packages if possible, rather than}
\DoxyCodeLine{  //   choosing a newer version of a dependency.  Defaults to false, ie,}
\DoxyCodeLine{  //   always try to get the latest and greatest deps.}
\DoxyCodeLine{  // legacyBundling: Nest every dep under the node requiring it, npm v2 style.}
\DoxyCodeLine{  //   No unnecessary deduplication.  Default false.}
\DoxyCodeLine{}
\DoxyCodeLine{  // At the end of this process, arb.idealTree is set.}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{// WRITING}
\DoxyCodeLine{}
\DoxyCodeLine{// Make the idealTree be the thing that's on disk}
\DoxyCodeLine{arb.reify(\{}
\DoxyCodeLine{  // write the lockfile(s) back to disk, and package.json with any updates}
\DoxyCodeLine{  // defaults to 'true'}
\DoxyCodeLine{  save: true,}
\DoxyCodeLine{\}).then(() => \{}
\DoxyCodeLine{  // node modules has been written to match the idealTree}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15419}{}\doxysection{DATA STRUCTURES}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15419}
A {\ttfamily node\+\_\+modules} tree is a logical graph of dependencies overlaid on a physical tree of folders.

A {\ttfamily Node} represents a package folder on disk, either at the root of the package, or within a {\ttfamily node\+\_\+modules} folder. The physical structure of the folder tree is represented by the {\ttfamily node.\+parent} reference to the containing folder, and {\ttfamily node.\+children} map of nodes within its {\ttfamily node\+\_\+modules} folder, where the key in the map is the name of the folder in {\ttfamily node\+\_\+modules}, and the value is the child node.

A node without a parent is a top of tree.

A {\ttfamily Link} represents a symbolic link to a package on disk. This can be a symbolic link to a package folder within the current tree, or elsewhere on disk. The {\ttfamily link.\+target} is a reference to the actual node. Links differ from Nodes in that dependencies are resolved from the {\itshape target} location, rather than from the link location.

An {\ttfamily Edge} represents a dependency relationship. Each node has an {\ttfamily edges\+In} set, and an {\ttfamily edges\+Out} map. Each edge has a {\ttfamily type} which specifies what kind of dependency it represents\+: `\textquotesingle{}prod'{\ttfamily for regular dependencies, }\textquotesingle{}peer\textquotesingle{}{\ttfamily for peer\+Dependencies,}\textquotesingle{}dev\textquotesingle{}{\ttfamily for dev\+Dependencies, and }\textquotesingle{}optional\textquotesingle{}{\ttfamily for optional\+Dependencies.}edge.\+from$<$tt$>$is a reference to the node that has the dependency, andedge.\+to\`{} is a reference to the node that requires the dependency.

As nodes are moved around in the tree, the graph edges are automatically updated to point at the new module resolution targets. In other words, {\ttfamily edge.\+from}, {\ttfamily edge.\+name}, and {\ttfamily edge.\+spec} are immutable; {\ttfamily edge.\+to} is updated automatically when a node\textquotesingle{}s parent changes.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15420}{}\doxysubsection{class Node}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15420}
All arborist trees are {\ttfamily Node} objects. A {\ttfamily Node} refers to a package folder, which may have children in {\ttfamily node\+\_\+modules}.


\begin{DoxyItemize}
\item {\ttfamily node.\+name} The name of this node\textquotesingle{}s folder in {\ttfamily node\+\_\+modules}.
\item {\ttfamily node.\+parent} Physical parent node in the tree. The package in whose {\ttfamily node\+\_\+modules} folder this package lives. Null if node is top of tree.

Setting {\ttfamily node.\+parent} will automatically update {\ttfamily node.\+location} and all graph edges affected by the move.
\item {\ttfamily node.\+meta} A {\ttfamily Shrinkwrap} object which looks up {\ttfamily resolved} and {\ttfamily integrity} values for all modules in this tree. Only relevant on {\ttfamily root} nodes.
\item {\ttfamily node.\+children} Map of packages located in the node\textquotesingle{}s {\ttfamily node\+\_\+modules} folder.
\item {\ttfamily node.\+package} The contents of this node\textquotesingle{}s {\ttfamily package.\+json} file.
\item {\ttfamily node.\+path} File path to this package. If the node is a link, then this is the path to the link, not to the link target. If the node is {\itshape not} a link, then this matches {\ttfamily node.\+realpath}.
\item {\ttfamily node.\+realpath} The full real filepath on disk where this node lives.
\item {\ttfamily node.\+location} A slash-\/normalized relative path from the root node to this node\textquotesingle{}s path.
\item {\ttfamily node.\+is\+Link} Whether this represents a symlink. Always {\ttfamily false} for Node objects, always {\ttfamily true} for Link objects.
\item {\ttfamily node.\+is\+Root} True if this node is a root node. (Ie, if {\ttfamily node.\+root === node}.)
\item {\ttfamily node.\+root} The root node where we are working. If not assigned to some other value, resolves to the node itself. (Ie, the root node\textquotesingle{}s {\ttfamily root} property refers to itself.)
\item {\ttfamily node.\+is\+Top} True if this node is the top of its tree (ie, has no {\ttfamily parent}, false otherwise).
\item {\ttfamily node.\+top} The top node in this node\textquotesingle{}s tree. This will be equal to {\ttfamily node.\+root} for simple trees, but link targets will frequently be outside of (or nested somewhere within) a {\ttfamily node\+\_\+modules} hierarchy, and so will have a different {\ttfamily top}.
\item {\ttfamily node.\+dev}, {\ttfamily node.\+optional}, {\ttfamily node.\+dev\+Optional}, {\ttfamily node.\+peer}, Indicators as to whether this node is a dev, optional, and/or peer dependency. These flags are relevant when pruning dependencies out of the tree or deciding what to reify. See {\bfseries{Package Dependency Flags}} below for explanations.
\item {\ttfamily node.\+edges\+Out} Edges in the dependency graph indicating nodes that this node depends on, which resolve its dependencies.
\item {\ttfamily node.\+edges\+In} Edges in the dependency graph indicating nodes that depend on this node.
\item {\ttfamily extraneous} True if this package is not required by any other for any reason. False for top of tree.
\item {\ttfamily node.\+resolve(name)} Identify the node that will be returned when code in this package runs {\ttfamily require(name)}
\item {\ttfamily node.\+errors} Array of errors encountered while parsing package.\+json or version specifiers.
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15421}{}\doxysubsection{class Link}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15421}
Link objects represent a symbolic link within the {\ttfamily node\+\_\+modules} folder. They have most of the same properties and methods as {\ttfamily Node} objects, with a few differences.


\begin{DoxyItemize}
\item {\ttfamily link.\+target} A Node object representing the package that the link references. If this is a Node already present within the tree, then it will be the same object. If it\textquotesingle{}s outside of the tree, then it will be treated as the top of its own tree.
\item {\ttfamily link.\+is\+Link} Always true.
\item {\ttfamily link.\+children} This is always an empty map, since links don\textquotesingle{}t have their own children directly.
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15422}{}\doxysubsection{class Edge}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15422}
Edge objects represent a dependency relationship a package node to the point in the tree where the dependency will be loaded. As nodes are moved within the tree, Edges automatically update to point to the appropriate location.


\begin{DoxyItemize}
\item {\ttfamily new Edge(\{ from, type, name, spec \})} Creates a new edge with the specified fields. After instantiation, none of the fields can be changed directly.
\item {\ttfamily edge.\+from} The node that has the dependency.
\item {\ttfamily edge.\+type} The type of dependency. One of `\textquotesingle{}prod'{\ttfamily ,}\textquotesingle{}dev\textquotesingle{}{\ttfamily ,}\textquotesingle{}peer\textquotesingle{}{\ttfamily , or}\textquotesingle{}optional\textquotesingle{}{\ttfamily . $\ast$}edge.\+name$<$tt$>$The name of the dependency. Ie, the key in the relevantpackage.\+json$<$tt$>$dependencies object. $\ast$edge.\+spec\`{} The specifier that is required. This can be a version, range, tag name, git url, or tarball URL. Any specifier allowed by npm is supported.
\item {\ttfamily edge.\+to} Automatically set to the node in the tree that matches the {\ttfamily name} field.
\item {\ttfamily edge.\+valid} True if {\ttfamily edge.\+to} satisfies the specifier.
\item {\ttfamily edge.\+error} A string indicating the type of error if there is a problem, or {\ttfamily null} if it\textquotesingle{}s valid. Values, in order of precedence\+:
\begin{DoxyItemize}
\item {\ttfamily DETACHED} Indicates that the edge has been detached from its {\ttfamily edge.\+from} node, typically because a new edge was created when a dependency specifier was modified.
\item {\ttfamily MISSING} Indicates that the dependency is unmet. Note that this is {\itshape not} set for unmet dependencies of the {\ttfamily optional} type.
\item {\ttfamily PEER LOCAL} Indicates that a {\ttfamily peer\+Dependency} is found in the node\textquotesingle{}s local {\ttfamily node\+\_\+modules} folder, and the node is not the top of the tree. This violates the {\ttfamily peer\+Dependency} contract, because it means that the dependency is not a peer.
\item {\ttfamily INVALID} Indicates that the dependency does not satisfy {\ttfamily edge.\+spec}.
\end{DoxyItemize}
\item {\ttfamily edge.\+reload()} Re-\/resolve to find the appropriate value for {\ttfamily edge.\+to}. Called automatically from the {\ttfamily Node} class when the tree is mutated.
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15423}{}\doxysubsection{Package Dependency Flags}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules81a90dbd6bbeddd8efdf250d9c01a5d1_autotoc_md15423}
The dependency type of a node can be determined efficiently by looking at the {\ttfamily dev}, {\ttfamily optional}, and {\ttfamily dev\+Optional} flags on the node object. These are updated by arborist when necessary whenever the tree is modified in such a way that the dependency graph can change, and are relevant when pruning nodes from the tree.


\begin{DoxyCode}{0}
\DoxyCodeLine{| extraneous | peer | dev | optional | devOptional | meaning             | prune?            |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |      |     |          |             | production dep      | never             |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|     X      | N/A  | N/A |   N/A    |     N/A     | nothing depends on  | always            |}
\DoxyCodeLine{|            |      |     |          |             | this, it is trash   |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |      |  X  |          |      X      | devDependency, or   | if pruning dev    |}
\DoxyCodeLine{|            |      |     |          | not in lock | only depended upon  |                   |}
\DoxyCodeLine{|            |      |     |          |             | by devDependencies  |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |      |     |    X     |      X      | optionalDependency, | if pruning        |}
\DoxyCodeLine{|            |      |     |          | not in lock | or only depended on | optional          |}
\DoxyCodeLine{|            |      |     |          |             | by optionalDeps     |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |      |  X  |    X     |      X      | Optional dependency | if pruning EITHER |}
\DoxyCodeLine{|            |      |     |          | not in lock | of dep(s) in the    | dev OR optional   |}
\DoxyCodeLine{|            |      |     |          |             | dev hierarchy       |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |      |     |          |      X      | BOTH a non-\/optional | if pruning BOTH   |}
\DoxyCodeLine{|            |      |     |          |   in lock   | dep within the dev  | dev AND optional  |}
\DoxyCodeLine{|            |      |     |          |             | hierarchy, AND a    |                   |}
\DoxyCodeLine{|            |      |     |          |             | dep within the      |                   |}
\DoxyCodeLine{|            |      |     |          |             | optional hierarchy  |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |  X   |     |          |             | peer dependency, or | if pruning peers  |}
\DoxyCodeLine{|            |      |     |          |             | only depended on by |                   |}
\DoxyCodeLine{|            |      |     |          |             | peer dependencies   |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |  X   |  X  |          |      X      | peer dependency of  | if pruning peer   |}
\DoxyCodeLine{|            |      |     |          | not in lock | dev node hierarchy  | OR dev deps       |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |  X   |     |    X     |      X      | peer dependency of  | if pruning peer   |}
\DoxyCodeLine{|            |      |     |          | not in lock | optional nodes, or  | OR optional deps  |}
\DoxyCodeLine{|            |      |     |          |             | peerOptional dep    |                   |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |  X   |  X  |    X     |      X      | peer optional deps  | if pruning peer   |}
\DoxyCodeLine{|            |      |     |          | not in lock | of the dev dep      | OR optional OR    |}
\DoxyCodeLine{|            |      |     |          |             | hierarchy           | dev               |}
\DoxyCodeLine{|-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/|}
\DoxyCodeLine{|            |  X   |     |          |      X      | BOTH a non-\/optional | if pruning peers  |}
\DoxyCodeLine{|            |      |     |          |   in lock   | peer dep within the | OR:               |}
\DoxyCodeLine{|            |      |     |          |             | dev hierarchy, AND  | BOTH optional     |}
\DoxyCodeLine{|            |      |     |          |             | a peer optional dep | AND dev deps      |}
\DoxyCodeLine{+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/+}

\end{DoxyCode}



\begin{DoxyItemize}
\item If none of these flags are set, then the node is required by the dependency and/or peer\+Dependency hierarchy. It should not be pruned.
\item If {\itshape both} {\ttfamily node.\+dev} and {\ttfamily node.\+optional} are set, then the node is an optional dependency of one of the packages in the dev\+Dependency hierarchy. It should be pruned if {\itshape either} dev or optional deps are being removed.
\item If {\ttfamily node.\+dev} is set, but {\ttfamily node.\+optional} is not, then the node is required in the dev\+Dependency hierarchy. It should be pruned if dev dependencies are being removed.
\item If {\ttfamily node.\+optional} is set, but {\ttfamily node.\+dev} is not, then the node is required in the optional\+Dependency hierarchy. It should be pruned if optional dependencies are being removed.
\item If {\ttfamily node.\+dev\+Optional} is set, then the node is a (non-\/optional) dependency within the dev\+Dependency hierarchy, {\itshape and} a dependency within the {\ttfamily optional\+Dependency} hierarchy. It should be pruned if {\itshape both} dev and optional dependencies are being removed.
\item If {\ttfamily node.\+peer} is set, then all the same semantics apply as above, except that the dep is brought in by a peer dep at some point, rather than a normal non-\/peer dependency.
\end{DoxyItemize}

Note\+: {\ttfamily dev\+Optional} is only set in the shrinkwrap/package-\/lock file if {\itshape neither} {\ttfamily dev} nor {\ttfamily optional} are set, as it would be redundant. 