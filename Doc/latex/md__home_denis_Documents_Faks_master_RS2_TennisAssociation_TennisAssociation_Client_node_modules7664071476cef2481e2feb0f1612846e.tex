\href{https://npm.im/libnpmaccess}{\texttt{ }} \href{https://npm.im/libnpmaccess}{\texttt{ }} \href{https://github.com/npm/libnpmaccess/actions?query=workflow\%3A\%22Node+CI\%22}{\texttt{ }} \href{https://coveralls.io/github/npm/libnpmaccess?branch=latest}{\texttt{ }}

\href{https://github.com/npm/libnpmaccess}{\texttt{ {\ttfamily libnpmaccess}}} is a Node.\+js library that provides programmatic access to the guts of the npm CLI\textquotesingle{}s {\ttfamily npm access} command and its various subcommands. This includes managing account 2FA, listing packages and permissions, looking at package collaborators, and defining package permissions for users, orgs, and teams.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15162}{}\doxysection{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15162}

\begin{DoxyCode}{0}
\DoxyCodeLine{const access = require('libnpmaccess')}
\DoxyCodeLine{}
\DoxyCodeLine{// List all packages @zkat has access to on the npm registry.}
\DoxyCodeLine{console.log(Object.keys(await access.lsPackages('zkat')))}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15163}{}\doxysection{Table of Contents}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15163}

\begin{DoxyItemize}
\item \href{\#install}{\texttt{ Installing}}
\item \href{\#example}{\texttt{ Example}}
\item \href{\#contributing}{\texttt{ Contributing}}
\item \href{\#api}{\texttt{ API}}
\begin{DoxyItemize}
\item \href{\#opts}{\texttt{ access opts}}
\item \href{\#public}{\texttt{ {\ttfamily public()}}}
\item \href{\#restricted}{\texttt{ {\ttfamily restricted()}}}
\item \href{\#grant}{\texttt{ {\ttfamily grant()}}}
\item \href{\#revoke}{\texttt{ {\ttfamily revoke()}}}
\item \href{\#tfa-required}{\texttt{ {\ttfamily tfa\+Required()}}}
\item \href{\#tfa-not-required}{\texttt{ {\ttfamily tfa\+Not\+Required()}}}
\item \href{\#ls-packages}{\texttt{ {\ttfamily ls\+Packages()}}}
\item \href{\#ls-packages-stream}{\texttt{ {\ttfamily ls\+Packages.\+stream()}}}
\item \href{\#ls-collaborators}{\texttt{ {\ttfamily ls\+Collaborators()}}}
\item \href{\#ls-collaborators-stream}{\texttt{ {\ttfamily ls\+Collaborators.\+stream()}}}
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15164}{}\doxysubsection{Install}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15164}
{\ttfamily \$ npm install libnpmaccess}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15165}{}\doxysubsection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15165}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15166}{}\doxysubsubsection{$<$a name=\char`\"{}opts\char`\"{}$>$$<$/a$>$ $<$tt$>$opts$<$/tt$>$ for $<$tt$>$libnpmaccess$<$/tt$>$ commands}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15166}
{\ttfamily libnpmaccess} uses \href{https://npm.im/npm-registry-fetch}{\texttt{ {\ttfamily npm-\/registry-\/fetch}}}. All options are passed through directly to that library, so please refer to \mbox{[}its own {\ttfamily opts} documentation\mbox{]}(\href{https://www.npmjs.com/package/npm-registry-fetch\#fetch-options}{\texttt{ https\+://www.\+npmjs.\+com/package/npm-\/registry-\/fetch\#fetch-\/options}}) for options that can be passed in.

A couple of options of note for those in a hurry\+:


\begin{DoxyItemize}
\item {\ttfamily opts.\+token} -\/ can be passed in and will be used as the authentication token for the registry. For other ways to pass in auth details, see the n-\/r-\/f docs.
\item {\ttfamily opts.\+otp} -\/ certain operations will require an OTP token to be passed in. If a {\ttfamily libnpmaccess} command fails with {\ttfamily err.\+code === EOTP}, please retry the request with {\ttfamily \{otp\+: $<$2fa token$>$\}}
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15167}{}\doxysubsubsection{$<$a name=\char`\"{}public\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+public(spec, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15167}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec.

Makes package described by {\ttfamily spec} public.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15168}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15168}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.public('@foo/bar', \{token: 'myregistrytoken'\})}
\DoxyCodeLine{// `@foo/bar` is now public}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15169}{}\doxysubsubsection{$<$a name=\char`\"{}restricted\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+restricted(spec, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15169}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec.

Makes package described by {\ttfamily spec} private/restricted.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15170}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15170}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.restricted('@foo/bar', \{token: 'myregistrytoken'\})}
\DoxyCodeLine{// `@foo/bar` is now private}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15171}{}\doxysubsubsection{$<$a name=\char`\"{}grant\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+grant(spec, team, permissions, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15171}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec. {\ttfamily team} must be a fully-\/qualified team name, in the {\ttfamily scope\+:team} format, with or without the {\ttfamily @} prefix, and the team must be a valid team within that scope. {\ttfamily permissions} must be one of `\textquotesingle{}read-\/only'{\ttfamily or}\textquotesingle{}read-\/write\textquotesingle{}\`{}.

Grants {\ttfamily read-\/only} or {\ttfamily read-\/write} permissions for a certain package to a team.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15172}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15172}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.grant('@foo/bar', '@foo:myteam', 'read-\/write', \{}
\DoxyCodeLine{  token: 'myregistrytoken'}
\DoxyCodeLine{\})}
\DoxyCodeLine{// `@foo/bar` is now read/write enabled for the @foo:myteam team.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15173}{}\doxysubsubsection{$<$a name=\char`\"{}revoke\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+revoke(spec, team, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15173}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec. {\ttfamily team} must be a fully-\/qualified team name, in the {\ttfamily scope\+:team} format, with or without the {\ttfamily @} prefix, and the team must be a valid team within that scope. {\ttfamily permissions} must be one of `\textquotesingle{}read-\/only'{\ttfamily or}\textquotesingle{}read-\/write\textquotesingle{}\`{}.

Removes access to a package from a certain team.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15174}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15174}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.revoke('@foo/bar', '@foo:myteam', \{}
\DoxyCodeLine{  token: 'myregistrytoken'}
\DoxyCodeLine{\})}
\DoxyCodeLine{// @foo:myteam can no longer access `@foo/bar`}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15175}{}\doxysubsubsection{$<$a name=\char`\"{}tfa-\/required\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+tfa\+Required(spec, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15175}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec.

Makes it so publishing or managing a package requires using 2FA tokens to complete operations.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15176}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15176}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.tfaRequires('lodash', \{token: 'myregistrytoken'\})}
\DoxyCodeLine{// Publishing or changing dist-\/tags on `lodash` now require OTP to be enabled.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15177}{}\doxysubsubsection{$<$a name=\char`\"{}tfa-\/not-\/required\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+tfa\+Not\+Required(spec, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Boolean$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15177}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec.

Disabled the package-\/level 2FA requirement for {\ttfamily spec}. Note that you will need to pass in an {\ttfamily otp} token in {\ttfamily opts} in order to complete this operation.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15178}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15178}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.tfaNotRequired('lodash', \{otp: '123654', token: 'myregistrytoken'\})}
\DoxyCodeLine{// Publishing or editing dist-\/tags on `lodash` no longer requires OTP to be}
\DoxyCodeLine{// enabled.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15179}{}\doxysubsubsection{$<$a name=\char`\"{}ls-\/packages\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+ls\+Packages(entity, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Object $\vert$ null$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15179}
{\ttfamily entity} must be either a valid org or user name, or a fully-\/qualified team name in the {\ttfamily scope\+:team} format, with or without the {\ttfamily @} prefix.

Lists out packages a user, org, or team has access to, with corresponding permissions. Packages that the access token does not have access to won\textquotesingle{}t be listed.

In order to disambiguate between users and orgs, two requests may end up being made when listing orgs or users.

For a streamed version of these results, see \href{\#ls-package-stream}{\texttt{ {\ttfamily access.\+ls\+Packages.\+stream()}}}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15180}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15180}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.lsPackages('zkat', \{}
\DoxyCodeLine{  token: 'myregistrytoken'}
\DoxyCodeLine{\})}
\DoxyCodeLine{// Lists all packages `@zkat` has access to on the registry, and the}
\DoxyCodeLine{// corresponding permissions.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15181}{}\doxysubsubsection{$<$a name=\char`\"{}ls-\/packages-\/stream\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+ls\+Packages.\+stream(scope, \mbox{[}team\mbox{]}, \mbox{[}opts\mbox{]}) -\/$>$ Stream$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15181}
{\ttfamily entity} must be either a valid org or user name, or a fully-\/qualified team name in the {\ttfamily scope\+:team} format, with or without the {\ttfamily @} prefix.

Streams out packages a user, org, or team has access to, with corresponding permissions, with each stream entry being formatted like {\ttfamily \mbox{[}package\+Name, permissions\mbox{]}}. Packages that the access token does not have access to won\textquotesingle{}t be listed.

In order to disambiguate between users and orgs, two requests may end up being made when listing orgs or users.

The returned stream is a valid {\ttfamily async\+Iterator}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15182}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15182}

\begin{DoxyCode}{0}
\DoxyCodeLine{for await (let [pkg, perm] of access.lsPackages.stream('zkat')) \{}
\DoxyCodeLine{  console.log('zkat has', perm, 'access to', pkg)}
\DoxyCodeLine{\}}
\DoxyCodeLine{// zkat has read-\/write access to eggplant}
\DoxyCodeLine{// zkat has read-\/only access to @npmcorp/secret}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15183}{}\doxysubsubsection{$<$a name=\char`\"{}ls-\/collaborators\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+ls\+Collaborators(spec, \mbox{[}user\mbox{]}, \mbox{[}opts\mbox{]}) -\/$>$ Promise$<$\+Object $\vert$ null$>$$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15183}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec. {\ttfamily user} must be a valid user name, with or without the {\ttfamily @} prefix.

Lists out access privileges for a certain package. Will only show permissions for packages to which you have at least read access. If {\ttfamily user} is passed in, the list is filtered only to teams {\itshape that} user happens to belong to.

For a streamed version of these results, see \href{\#ls-collaborators-stream}{\texttt{ {\ttfamily access.\+ls\+Collaborators.\+stream()}}}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15184}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15184}

\begin{DoxyCode}{0}
\DoxyCodeLine{await access.lsCollaborators('@npm/foo', 'zkat', \{}
\DoxyCodeLine{  token: 'myregistrytoken'}
\DoxyCodeLine{\})}
\DoxyCodeLine{// Lists all teams with access to @npm/foo that @zkat belongs to.}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15185}{}\doxysubsubsection{$<$a name=\char`\"{}ls-\/collaborators-\/stream\char`\"{}$>$$<$/a$>$ $<$tt$>$$>$ access.\+ls\+Collaborators.\+stream(spec, \mbox{[}user\mbox{]}, \mbox{[}opts\mbox{]}) -\/$>$ Stream$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15185}
{\ttfamily spec} must be an \href{https://npm.im/npm-package-arg}{\texttt{ {\ttfamily npm-\/package-\/arg}}}-\/compatible registry spec. {\ttfamily user} must be a valid user name, with or without the {\ttfamily @} prefix.

Stream out access privileges for a certain package, with each entry in {\ttfamily \mbox{[}user, permissions\mbox{]}} format. Will only show permissions for packages to which you have at least read access. If {\ttfamily user} is passed in, the list is filtered only to teams {\itshape that} user happens to belong to.

The returned stream is a valid {\ttfamily async\+Iterator}.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15186}{}\doxyparagraph{Example}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules7664071476cef2481e2feb0f1612846e_autotoc_md15186}

\begin{DoxyCode}{0}
\DoxyCodeLine{for await (let [usr, perm] of access.lsCollaborators.stream('npm')) \{}
\DoxyCodeLine{  console.log(usr, 'has', perm, 'access to npm')}
\DoxyCodeLine{\}}
\DoxyCodeLine{// zkat has read-\/write access to npm}
\DoxyCodeLine{// iarna has read-\/write access to npm}

\end{DoxyCode}
 