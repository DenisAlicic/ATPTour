An \href{https://github.com/mafintosh/abstract-encoding}{\texttt{ abstract-\/encoding}} compliant module for encoding / decoding DNS packets. Lifted out of \href{https://github.com/mafintosh/multicast-dns}{\texttt{ multicast-\/dns}} as a separate module.


\begin{DoxyCode}{0}
\DoxyCodeLine{npm install dns-\/packet}

\end{DoxyCode}


\href{https://travis-ci.org/mafintosh/dns-packet}{\texttt{ }}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3498}{}\doxysection{Usage}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3498}

\begin{DoxyCode}{0}
\DoxyCodeLine{var packet = require('dns-\/packet')}
\DoxyCodeLine{var dgram = require('dgram')}
\DoxyCodeLine{}
\DoxyCodeLine{var socket = dgram.createSocket('udp4')}
\DoxyCodeLine{}
\DoxyCodeLine{var buf = packet.encode(\{}
\DoxyCodeLine{  type: 'query',}
\DoxyCodeLine{  id: 1,}
\DoxyCodeLine{  flags: packet.RECURSION\_DESIRED,}
\DoxyCodeLine{  questions: [\{}
\DoxyCodeLine{    type: 'A',}
\DoxyCodeLine{    name: 'google.com'}
\DoxyCodeLine{  \}]}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{socket.on('message', function (message) \{}
\DoxyCodeLine{  console.log(packet.decode(message)) // prints out a response from google dns}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{socket.send(buf, 0, buf.length, 53, '8.8.8.8')}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3499}{}\doxysection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3499}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3500}{}\doxysubsubsection{$<$tt$>$var buf = packets.\+encode(packet, \mbox{[}buf\mbox{]}, \mbox{[}offset\mbox{]})$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3500}
Encodes a DNS packet into a buffer.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3501}{}\doxysubsubsection{$<$tt$>$var packet = packets.\+decode(buf, \mbox{[}offset\mbox{]})$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3501}
Decode a DNS packet from a buffer\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3502}{}\doxysubsubsection{$<$tt$>$var len = packets.\+encoding\+Length(packet)$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3502}
Returns how many bytes are needed to encode the DNS packet\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3503}{}\doxysection{Packets}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3503}
Packets look like this


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  type: 'query|response',}
\DoxyCodeLine{  id: optionalIdNumber,}
\DoxyCodeLine{  flags: optionalBitFlags,}
\DoxyCodeLine{  questions: [...],}
\DoxyCodeLine{  answers: [...],}
\DoxyCodeLine{  additionals: [...],}
\DoxyCodeLine{  authorities: [...]}
\DoxyCodeLine{\}}

\end{DoxyCode}


The bit flags available are


\begin{DoxyCode}{0}
\DoxyCodeLine{packet.RECURSION\_DESIRED}
\DoxyCodeLine{packet.RECURSION\_AVAILABLE}
\DoxyCodeLine{packet.TRUNCATED\_RESPONSE}
\DoxyCodeLine{packet.AUTHORITATIVE\_ANSWER}
\DoxyCodeLine{packet.AUTHENTIC\_DATA}
\DoxyCodeLine{packet.CHECKING\_DISABLED}

\end{DoxyCode}


To use more than one flag bitwise-\/or them together


\begin{DoxyCode}{0}
\DoxyCodeLine{var flags = packet.RECURSION\_DESIRED | packet.RECURSION\_AVAILABLE}

\end{DoxyCode}


And to check for a flag use bitwise-\/and


\begin{DoxyCode}{0}
\DoxyCodeLine{var isRecursive = message.flags \& packet.RECURSION\_DESIRED}

\end{DoxyCode}


A question looks like this


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  type: 'A', // or SRV, AAAA, etc}
\DoxyCodeLine{  name: 'google.com' // which record are you looking for}
\DoxyCodeLine{\}}

\end{DoxyCode}


And an answers, additional, or authority looks like this


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  type: 'A', // or SRV, AAAA, etc}
\DoxyCodeLine{  name: 'google.com', // which name is this record for}
\DoxyCodeLine{  ttl: optionalTimeToLiveInSeconds,}
\DoxyCodeLine{  (record specific data, see below)}
\DoxyCodeLine{\}}

\end{DoxyCode}


Currently the different available records are\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3504}{}\doxysubsubsection{$<$tt$>$\+A$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3504}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: 'IPv4 address' // fx 127.0.0.1}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3505}{}\doxysubsubsection{$<$tt$>$\+AAAA$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3505}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: 'IPv6 address' // fx fe80::1}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3506}{}\doxysubsubsection{$<$tt$>$\+TXT$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3506}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: Buffer('some text')}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3507}{}\doxysubsubsection{$<$tt$>$\+NS$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3507}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: nameServer}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3508}{}\doxysubsubsection{$<$tt$>$\+NULL$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3508}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: Buffer('any binary data')}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3509}{}\doxysubsubsection{$<$tt$>$\+SOA$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3509}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data:}
\DoxyCodeLine{    \{}
\DoxyCodeLine{      mname: domainName,}
\DoxyCodeLine{      rname: mailbox,}
\DoxyCodeLine{      serial: zoneSerial,}
\DoxyCodeLine{      refresh: refreshInterval,}
\DoxyCodeLine{      retry: retryInterval,}
\DoxyCodeLine{      expire: expireInterval,}
\DoxyCodeLine{      minimum: minimumTTL}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3510}{}\doxysubsubsection{$<$tt$>$\+SRV$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3510}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: \{}
\DoxyCodeLine{    port: servicePort,}
\DoxyCodeLine{    target: serviceHostName,}
\DoxyCodeLine{    priority: optionalServicePriority,}
\DoxyCodeLine{    weight: optionalServiceWeight}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3511}{}\doxysubsubsection{$<$tt$>$\+HINFO$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3511}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: \{}
\DoxyCodeLine{    cpu: 'cpu info',}
\DoxyCodeLine{    os: 'os info'}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3512}{}\doxysubsubsection{$<$tt$>$\+PTR$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3512}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: 'points.to.another.record'}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3513}{}\doxysubsubsection{$<$tt$>$\+CNAME$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3513}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: 'cname.to.another.record'}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3514}{}\doxysubsubsection{$<$tt$>$\+DNAME$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3514}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  data: 'dname.to.another.record'}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3515}{}\doxysubsubsection{$<$tt$>$\+CAA$<$/tt$>$}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3515}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{  flags: 128, // octet}
\DoxyCodeLine{  tag: 'issue|issuewild|iodef',}
\DoxyCodeLine{  value: 'ca.example.net'}
\DoxyCodeLine{\}}

\end{DoxyCode}


If you need another one, open an issue and we\textquotesingle{}ll try to add it.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3516}{}\doxysection{License}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_dns_packet_README_autotoc_md3516}
MIT 