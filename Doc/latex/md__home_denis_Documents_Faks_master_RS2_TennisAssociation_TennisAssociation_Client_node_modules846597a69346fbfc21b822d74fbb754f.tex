Like Promise.\+all, but save rejections until all promises are resolved.

This is handy when you want to do a bunch of things in parallel, and rollback on failure, without clobbering or conflicting with those parallel actions that may be in flight. For example, creating a bunch of files, and deleting any if they don\textquotesingle{}t all succeed.

Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const lateReject = require('promise-\/all-\/reject-\/late')}
\DoxyCodeLine{}
\DoxyCodeLine{const \{ promisify \} = require('util')}
\DoxyCodeLine{const fs = require('fs')}
\DoxyCodeLine{const writeFile = promisify(fs.writeFile)}
\DoxyCodeLine{}
\DoxyCodeLine{const createFilesOrRollback = (files) => \{}
\DoxyCodeLine{  return lateReject(files.map(file => writeFile(file, 'some data')))}
\DoxyCodeLine{    .catch(er => \{}
\DoxyCodeLine{      // try to clean up, then fail with the initial error}
\DoxyCodeLine{      // we know that all write attempts are finished at this point}
\DoxyCodeLine{      return lateReject(files.map(file => rimraf(file)))}
\DoxyCodeLine{        .catch(er => \{}
\DoxyCodeLine{          console.error('failed to clean up, youre on your own i guess', er)}
\DoxyCodeLine{        \})}
\DoxyCodeLine{        .then(() => \{}
\DoxyCodeLine{          // fail with the original error}
\DoxyCodeLine{          throw er}
\DoxyCodeLine{        \})}
\DoxyCodeLine{    \})}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules846597a69346fbfc21b822d74fbb754f_autotoc_md13538}{}\doxysection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules846597a69346fbfc21b822d74fbb754f_autotoc_md13538}

\begin{DoxyItemize}
\item {\ttfamily late\+Reject(\mbox{[}array, of, promises\mbox{]})} -\/ Resolve all the promises, returning a promise that rejects with the first error, or resolves with the array of results, but only after all promises are settled. 
\end{DoxyItemize}