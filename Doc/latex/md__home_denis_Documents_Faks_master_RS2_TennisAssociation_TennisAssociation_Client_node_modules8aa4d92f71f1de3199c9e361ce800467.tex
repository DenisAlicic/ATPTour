\begin{quote}
Rewrite a WASM binary \end{quote}
Replace in-\/place an AST node in the binary.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21362}{}\doxysection{Installation}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21362}

\begin{DoxyCode}{0}
\DoxyCodeLine{yarn add @webassemblyjs/wasm-\/edit}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21363}{}\doxysection{Usage}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21363}
Update\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  ModuleImport(\{ node \}) \{}
\DoxyCodeLine{    node.module = "{}foo"{};}
\DoxyCodeLine{    node.name = "{}bar"{};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Replace\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  Instr(path) \{}
\DoxyCodeLine{    const newNode = t.callInstruction(t.indexLiteral(0));}
\DoxyCodeLine{    path.replaceWith(newNode);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Remove\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ edit \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const visitors = \{}
\DoxyCodeLine{  ModuleExport(\{ node \}) \{}
\DoxyCodeLine{    path.remove()}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = edit(binary, visitors);}

\end{DoxyCode}


Insert\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import \{ add \} from "{}@webassemblyjs/wasm-\/edit"{};}
\DoxyCodeLine{}
\DoxyCodeLine{const binary = [/*...*/];}
\DoxyCodeLine{}
\DoxyCodeLine{const newBinary = add(actualBinary, [}
\DoxyCodeLine{  t.moduleImport("{}env"{}, "{}mem"{}, t.memory(t.limit(1)))}
\DoxyCodeLine{]);}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21364}{}\doxysection{Providing the AST}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules8aa4d92f71f1de3199c9e361ce800467_autotoc_md21364}
Providing an AST allows you to handle the decoding yourself, here is the API\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{addWithAST(Program, ArrayBuffer, Array<Node>): ArrayBuffer;}
\DoxyCodeLine{editWithAST(Program, ArrayBuffer, visitors): ArrayBuffer;}

\end{DoxyCode}


Note that the AST will be updated in-\/place. 