\begin{quote}
Retry a promise-\/returning or async function \end{quote}
It does exponential backoff and supports custom retry strategies for failed operations.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7541}{}\doxysection{Install}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7541}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$ npm install p-\/retry}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7542}{}\doxysection{Usage}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7542}

\begin{DoxyCode}{0}
\DoxyCodeLine{const pRetry = require('p-\/retry');}
\DoxyCodeLine{const fetch = require('node-\/fetch');}
\DoxyCodeLine{}
\DoxyCodeLine{const run = async () => \{}
\DoxyCodeLine{    const response = await fetch('https://sindresorhus.com/unicorn');}
\DoxyCodeLine{}
\DoxyCodeLine{    // Abort retrying if the resource doesn't exist}
\DoxyCodeLine{    if (response.status === 404) \{}
\DoxyCodeLine{        throw new pRetry.AbortError(response.statusText);}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    return response.blob();}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    console.log(await pRetry(run, \{retries: 5\}));}
\DoxyCodeLine{\})();}

\end{DoxyCode}


With the {\ttfamily on\+Failed\+Attempt} option\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const run = async () => \{}
\DoxyCodeLine{    const response = await fetch('https://sindresorhus.com/unicorn');}
\DoxyCodeLine{}
\DoxyCodeLine{    if (response.status !== 200) \{}
\DoxyCodeLine{        throw new Error(response.statusText);}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    return response.json();}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    const result = await pRetry(run, \{}
\DoxyCodeLine{        onFailedAttempt: error => \{}
\DoxyCodeLine{            console.log(`Attempt \$\{error.attemptNumber\} failed. There are \$\{error.retriesLeft\} retries left.`);}
\DoxyCodeLine{            // 1st request => Attempt 1 failed. There are 4 retries left.}
\DoxyCodeLine{            // 2nd request => Attempt 2 failed. There are 3 retries left.}
\DoxyCodeLine{            // â€¦}
\DoxyCodeLine{        \},}
\DoxyCodeLine{        retries: 5}
\DoxyCodeLine{    \});}
\DoxyCodeLine{}
\DoxyCodeLine{    console.log(result);}
\DoxyCodeLine{\})();}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7543}{}\doxysection{API}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7543}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7544}{}\doxysubsection{p\+Retry(input, \mbox{[}options\mbox{]})}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7544}
Returns a {\ttfamily Promise} that is fulfilled when calling {\ttfamily input} returns a fulfilled promise. If calling {\ttfamily input} returns a rejected promise, {\ttfamily input} is called again until the max retries are reached, it then rejects with the last rejection reason.

It doesn\textquotesingle{}t retry on {\ttfamily Type\+Error} as that\textquotesingle{}s a user error.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7545}{}\doxysubsubsection{input}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7545}
Type\+: {\ttfamily Function}

Receives the number of attempts as the first argument and is expected to return a {\ttfamily Promise} or any value.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7546}{}\doxysubsubsection{options}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7546}
Type\+: {\ttfamily Object}

Options are passed to the \href{https://github.com/tim-kos/node-retry\#retryoperationoptions}{\texttt{ {\ttfamily retry}}} module.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7547}{}\doxyparagraph{on\+Failed\+Attempt(error)}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7547}
Type\+: {\ttfamily Function}

Callback invoked on each retry. Receives the error thrown by {\ttfamily input} as the first argument with properties {\ttfamily attempt\+Number} and {\ttfamily retries\+Left} which indicate the current attempt number and the number of attempts left, respectively.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7548}{}\doxysubsection{p\+Retry.\+Abort\+Error(message$\vert$error)}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7548}
Abort retrying and reject the promise.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7549}{}\doxysubsection{message}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7549}
Type\+: {\ttfamily string}

Error message.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7550}{}\doxysubsection{error}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7550}
Type\+: {\ttfamily Error}

Custom error.\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7551}{}\doxysection{Tip}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7551}
You can pass arguments to the function being retried by wrapping it in an inline arrow function\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const pRetry = require('p-\/retry');}
\DoxyCodeLine{}
\DoxyCodeLine{const run = async emoji => \{}
\DoxyCodeLine{    // â€¦}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{(async () => \{}
\DoxyCodeLine{    // Without arguments}
\DoxyCodeLine{    await pRetry(run, \{retries: 5\});}
\DoxyCodeLine{}
\DoxyCodeLine{    // With arguments}
\DoxyCodeLine{    await pRetry(() => run('ðŸ¦„'), \{retries: 5\});}
\DoxyCodeLine{\})();}

\end{DoxyCode}
\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7552}{}\doxysection{Related}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7552}

\begin{DoxyItemize}
\item \href{https://github.com/sindresorhus/p-timeout}{\texttt{ p-\/timeout}} -\/ Timeout a promise after a specified amount of time
\item \href{https://github.com/sindresorhus/promise-fun}{\texttt{ Moreâ€¦}}
\end{DoxyItemize}\hypertarget{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7553}{}\doxysection{License}\label{md__home_denis_Documents_Faks_master_RS2_TennisAssociation_TennisAssociation_Client_node_modules_p_retry_readme_autotoc_md7553}
MIT Â© \href{https://sindresorhus.com}{\texttt{ Sindre Sorhus}} 