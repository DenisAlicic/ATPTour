<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tennis Association: treeverse</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tennis Association
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle">
<div class="title">treeverse </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p class="">Walk any kind of tree structure depth- or breadth-first. Supports promises and advanced map-reduce operations with a very small API.</p>
<p class="">Treeverse does not care what kind of tree it is, it will traverse it for you just fine. It does the right thing with functions that return Promises, and returns a non-Promise value if your functions don't return Promises.</p>
<p class="">Rather than imposing a specific structure, like requiring you to have child nodes stored in a <code>children</code> array, it calls the supplied <code>getChildren()</code> function, so the children can be anywhere (or not even exist yet!) This makes it suitable for <em>creating</em> an optimized tree from a set of dependency manifests, for example.</p>
<h1><a class="anchor" id="autotoc_md16289"></a>
USAGE</h1>
<div class="fragment"><div class="line">const {depth, breadth} = require(&#39;treeverse&#39;)</div>
<div class="line"> </div>
<div class="line">// depth-first traversal</div>
<div class="line">// returns a promise if any visit/leave function returns a promise</div>
<div class="line">// otherwise returns the result of leave, or visit if no leave function</div>
<div class="line">// provided.</div>
<div class="line">depth({</div>
<div class="line">  // the root node where we start the traversal</div>
<div class="line">  tree: rootNode,</div>
<div class="line"> </div>
<div class="line">  visit (node) {</div>
<div class="line">    // optional</div>
<div class="line">    // called upon descent into the node.</div>
<div class="line">    // return a promise, or a mapped value, or nothing to just leave it</div>
<div class="line">    // as-is</div>
<div class="line">  },</div>
<div class="line">  leave (node, children) {</div>
<div class="line">    // optional</div>
<div class="line">    // called as we ascend back to the root of the tree.</div>
<div class="line">    // return a promise, or a reduced value, or nothing to leave it as is</div>
<div class="line">    // the children array is a list of the child nodes that have been</div>
<div class="line">    // visited (and potentially left) already.  If the tree is acyclic,</div>
<div class="line">    // then leave() will have been called on all of them.  If it has</div>
<div class="line">    // cycles, then the children may not have been left yet.</div>
<div class="line">  },</div>
<div class="line">  getChildren (node, nodeResult) {</div>
<div class="line">    // required</div>
<div class="line">    // return an array of child nodes in the tree, if any exist</div>
<div class="line">    // returning a promise is totally ok, of course.</div>
<div class="line">    // the first argument is the original value of the node.  The second</div>
<div class="line">    // argument is the result of visit(node).</div>
<div class="line">  },</div>
<div class="line">  filter (node) {</div>
<div class="line">    // optional</div>
<div class="line">    // return true if the node should be visited, false otherwise</div>
<div class="line">    // initial tree is always visited, so this only filters children</div>
<div class="line">    // note that filtering a node _also_ filters all of its children.</div>
<div class="line">  },</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line">// breadth first traversal</div>
<div class="line">// returns a promise if any visit function returns a promise</div>
<div class="line">// otherwise returns the result of the top-level node.</div>
<div class="line">// note that only a visit() function is supported here, since a node&#39;s</div>
<div class="line">// children are typically traversed much later in the process.</div>
<div class="line">breadth({</div>
<div class="line">  // the root node where we start the traversal</div>
<div class="line">  tree: rootNode,</div>
<div class="line"> </div>
<div class="line">  visit (node) {</div>
<div class="line">    // optional, but a no-op if not provided.</div>
<div class="line">    // called when this node is encountered in the traversal.</div>
<div class="line">    // return a promise, or a mapped value, or nothing to leave as-is.</div>
<div class="line">  },</div>
<div class="line">  getChildren (node, nodeResult) {</div>
<div class="line">    // required, same as depth()</div>
<div class="line">  },</div>
<div class="line">  filter (node) {</div>
<div class="line">    // optional, same as depth()</div>
<div class="line">  },</div>
<div class="line">})</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md16290"></a>
API</h1>
<p class="">Both functions take a single options object as an argument, and return either the result value, or a Promise to the result value if the methods in the options argument ever return a Promise.</p>
<ul>
<li><code>treeverse.breadth</code> - Perform a breadth-first traversal. That is, walk across node siblings before traversing node children.</li>
<li><code>treeverse.depth</code> - Perform a depth-first traversal. That is, walk down into child nodes before traversing siblings.</li>
</ul>
<h1><a class="anchor" id="autotoc_md16291"></a>
OPTIONS</h1>
<p class="">All function options can return a Promise or actual value.</p>
<p class="">The return value is the result of the top level visit function if no leave function is provided, or leave. If any method along the way returns a promise, then the top level function will return a promise which resolves to the result of visiting (and leaving) the top node in the tree.</p>
<ul>
<li><code>tree</code> - The initial node where the traversal begins.</li>
<li><code>visit(node)</code> - Function to call upon visiting a node.</li>
<li><code>leave(node, children)</code> - (Depth only) Function to call upon leaving a node, once all of its children have been visited, and potentially left. <code>children</code> is an array of child node visit results. If the graph is cyclic, then some children <em>may</em> have been visited but not left.</li>
<li><code>getChildren(node, nodeResult)</code> - Get an array of child nodes to process.</li>
<li><code>filter</code> - Filter out child nodes from the traversal. Note that this filters the entire branch of the tree, not just that one node. That is, children of filtered nodes are not traversed either.</li>
</ul>
<h1><a class="anchor" id="autotoc_md16292"></a>
STACK DEPTH WARNING</h1>
<p class="">When a <code>leave</code> method is specified, then recursion is used, because maintaining state otherwise is challenging. This means that using <code>leave</code> with a synchronous depth first traversal of very deeply nested trees will result in stack overflow errors.</p>
<p class="">To avoid this, either make one or more of the functions async, or do all of the work in the <code>visit</code> method.</p>
<p class="">Breadth-first traversal always uses a loop, and is stack-safe.</p>
<p class="">It is <em>possible</em> to implement depth first traversal with a leave method using a loop rather than recursion, but maintaining the <code>leave(node, [children])</code> API surface would be challenging, and is not implemented at this time. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
