<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tennis Association: &lt;tt&gt;\@npmcli/config&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tennis Association
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle">
<div class="title"><code>@npmcli/config</code> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p class="">Configuration management for the npm cli.</p>
<p class="">This module is the spiritual descendant of <a href="http://npm.im/npmconf"><code>npmconf</code></a>, and the code that once lived in npm's <code>lib/config/</code> folder.</p>
<p class="">It does the management of configuration files that npm uses, but importantly, does <em>not</em> define all the configuration defaults or types, as those parts make more sense to live within the npm CLI itself.</p>
<p class="">The only exceptions:</p>
<ul>
<li>The <code>prefix</code> config value has some special semantics, setting the local prefix if specified on the CLI options and not in global mode, or the global prefix otherwise.</li>
<li>The <code>project</code> config file is loaded based on the local prefix (which can only be set by the CLI config options, and otherwise defaults to a walk up the folder tree to the first parent containing a <code>node_modules</code> folder, <code>package.json</code> file, or <code>package-lock.json</code> file.)</li>
<li>The <code>userconfig</code> value, as set by the environment and CLI (defaulting to <code>~/.npmrc</code>, is used to load user configs.</li>
<li>The <code>globalconfig</code> value, as set by the environment, CLI, and <code>userconfig</code> file (defaulting to <code>$PREFIX/etc/npmrc</code>) is used to load global configs.</li>
<li>A <code>builtin</code> config, read from a <code>npmrc</code> file in the root of the npm project itself, overrides all defaults.</li>
</ul>
<p class="">The resulting hierarchy of configs:</p>
<ul>
<li>CLI switches. eg <code>--some-key=some-value</code> on the command line. These are parsed by <a href="http://npm.im/nopt"><code>nopt</code></a>, which is not a great choice, but it's the one that npm has used forever, and changing it will be difficult.</li>
<li>Environment variables. eg <code>npm_config_some_key=some_value</code> in the environment. There is no way at this time to modify this prefix.</li>
<li>INI-formatted project configs. eg <code>some-key = some-value</code> in the <code>localPrefix</code> folder (ie, the <code>cwd</code>, or its nearest parent that contains either a <code>node_modules</code> folder or <code>package.json</code> file.)</li>
<li>INI-formatted userconfig file. eg <code>some-key = some-value</code> in <code>~/.npmrc</code>. The <code>userconfig</code> config value can be overridden by the <code>cli</code>, <code>env</code>, or <code>project</code> configs to change this value.</li>
<li>INI-formatted globalconfig file. eg <code>some-key = some-value</code> in the <code>globalPrefix</code> folder, which is inferred by looking at the location of the node executable, or the <code>prefix</code> setting in the <code>cli</code>, <code>env</code>, <code>project</code>, or <code>userconfig</code>. The <code>globalconfig</code> value at any of those levels can override this.</li>
<li>INI-formatted builtin config file. eg <code>some-key = some-value</code> in <code>/usr/local/lib/node_modules/npm/npmrc</code>. This is not configurable, and is determined by looking in the <code>npmPath</code> folder.</li>
<li>Default values (passed in by npm when it loads this module).</li>
</ul>
<h1><a class="anchor" id="autotoc_md15429"></a>
USAGE</h1>
<div class="fragment"><div class="line">const Config = require(&#39;@npmcli/config&#39;)</div>
<div class="line">// the types of all the configs we know about</div>
<div class="line">const types = require(&#39;./config/types.js&#39;)</div>
<div class="line">// default values for all the configs we know about</div>
<div class="line">const defaults = require(&#39;./config/defaults.js&#39;)</div>
<div class="line">// if you want -c to be short for --call and so on, define it here</div>
<div class="line">const shorthands = require(&#39;./config/shorthands.js&#39;)</div>
<div class="line"> </div>
<div class="line">const conf = new Config({</div>
<div class="line">  // path to the npm module being run</div>
<div class="line">  npmPath: resolve(__dirname, &#39;..&#39;),</div>
<div class="line">  types,</div>
<div class="line">  shorthands,</div>
<div class="line">  defaults,</div>
<div class="line">  // optional, defaults to process.argv</div>
<div class="line">  argv: process.argv,</div>
<div class="line">  // optional, defaults to process.env</div>
<div class="line">  env: process.env,</div>
<div class="line">  // optional, defaults to process.execPath</div>
<div class="line">  execPath: process.execPath,</div>
<div class="line">  // optional, defaults to process.platform</div>
<div class="line">  platform: process.platform,</div>
<div class="line">  // optional, defaults to process.cwd()</div>
<div class="line">  cwd: process.cwd(),</div>
<div class="line">  // optional, defaults to emitting &#39;log&#39; events on process object</div>
<div class="line">  // only silly, verbose, warn, and error are logged by this module</div>
<div class="line">  log: require(&#39;npmlog&#39;)</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line">// returns a promise that fails if config loading fails, and</div>
<div class="line">// resolves when the config object is ready for action</div>
<div class="line">conf.load().then(() =&gt; {</div>
<div class="line">  console.log(&#39;loaded ok! some-key = &#39; + conf.get(&#39;some-key&#39;))</div>
<div class="line">}).catch(er =&gt; {</div>
<div class="line">  console.error(&#39;error loading configs!&#39;, er)</div>
<div class="line">})</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15430"></a>
API</h1>
<p class="">The <code>Config</code> class is the sole export.</p>
<div class="fragment"><div class="line">const Config = require(&#39;@npmcli/config&#39;)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15431"></a>
static &lt;tt&gt;Config.typeDefs&lt;/tt&gt;</h2>
<p class="">The type definitions passed to <code>nopt</code> for CLI option parsing and known configuration validation.</p>
<h2><a class="anchor" id="autotoc_md15432"></a>
constructor &lt;tt&gt;new Config(options)&lt;/tt&gt;</h2>
<p class="">Options:</p>
<ul>
<li><code>types</code> Types of all known config values. Note that some are effectively given semantic value in the config loading process itself.</li>
<li><code>shorthands</code> An object mapping a shorthand value to an array of CLI arguments that replace it.</li>
<li><code>defaults</code> Default values for each of the known configuration keys. These should be defined for all configs given a type, and must be valid.</li>
<li><code>npmPath</code> The path to the <code>npm</code> module, for loading the <code>builtin</code> config file.</li>
<li><code>cwd</code> Optional, defaults to <code><a class="el" href="namespaceupdate-gyp.html#a353f325a85a850b0456a7cbaff8fc43b">process.cwd()</a></code>, used for inferring the <code>localPrefix</code> and loading the <code>project</code> config.</li>
<li><code>platform</code> Optional, defaults to <code>process.platform</code>. Used when inferring the <code>globalPrefix</code> from the <code>execPath</code>, since this is done diferently on Windows.</li>
<li><code>execPath</code> Optional, defaults to <code>process.execPath</code>. Used to infer the <code>globalPrefix</code>.</li>
<li><code>log</code> Optional, the object used to log debug messages, warnings, and errors. Defaults to emitting on the <code>process</code> object.</li>
<li><code>env</code> Optional, defaults to <code>process.env</code>. Source of the environment variables for configuration.</li>
<li><code>argv</code> Optional, defaults to <code>process.argv</code>. Source of the CLI options used for configuration.</li>
</ul>
<p class="">Returns a <code>config</code> object, which is not yet loaded.</p>
<p class="">Fields:</p>
<ul>
<li><code>config.globalPrefix</code> The prefix for <code>global</code> operations. Set by the <code>prefix</code> config value, or defaults based on the location of the <code>execPath</code> option.</li>
<li><code>config.localPrefix</code> The prefix for <code>local</code> operations. Set by the <code>prefix</code> config value on the CLI only, or defaults to either the <code>cwd</code> or its nearest ancestor containing a <code>node_modules</code> folder or <code>package.json</code> file.</li>
<li><code>config.sources</code> A read-only <code>Map</code> of the file (or a comment, if no file found, or relevant) to the config level loaded from that source.</li>
<li><code>config.data</code> A <code>Map</code> of config level to <code>ConfigData</code> objects. These objects should not be modified directly under any circumstances.<ul>
<li><code>source</code> The source where this data was loaded from.</li>
<li><code>raw</code> The raw data used to generate this config data, as it was parsed initially from the environment, config file, or CLI options.</li>
<li><code>data</code> The data object reflecting the inheritance of configs up to this point in the chain.</li>
<li><code>loadError</code> Any errors encountered that prevented the loading of this config data.</li>
</ul>
</li>
<li><code>config.list</code> A list sorted in priority of all the config data objects in the prototype chain. <code>config.list[0]</code> is the <code>cli</code> level, <code>config.list[1]</code> is the <code>env</code> level, and so on.</li>
<li><code>cwd</code> The <code>cwd</code> param</li>
<li><code>env</code> The <code>env</code> param</li>
<li><code>argv</code> The <code>argv</code> param</li>
<li><code>execPath</code> The <code>execPath</code> param</li>
<li><code>platform</code> The <code>platform</code> param</li>
<li><code>log</code> The <code>log</code> param</li>
<li><code>defaults</code> The <code>defaults</code> param</li>
<li><code>shorthands</code> The <code>shorthands</code> param</li>
<li><code>types</code> The <code>types</code> param</li>
<li><code>npmPath</code> The <code>npmPath</code> param</li>
<li><code>globalPrefix</code> The effective <code>globalPrefix</code></li>
<li><code>localPrefix</code> The effective <code>localPrefix</code></li>
<li><code>prefix</code> If &lsquo;config.get('global&rsquo;)<code>is true, then</code>globalPrefix<code>, otherwise</code>localPrefix<code> -</code>home<code>The user's home directory, found by looking at</code>env.HOME&lt;tt&gt;or callingos.homedir()<code>. -</code>loaded<code>A boolean indicating whether or not configs are loaded -</code>valid<code>A getter that returns</code>true<code>if all the config objects are valid. Any data objects that have been modified with</code>config.set(...)<code>will be re-evaluated when</code>config.valid` is read.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15433"></a>
&lt;tt&gt;config.load()&lt;/tt&gt;</h2>
<p class="">Load configuration from the various sources of information.</p>
<p class="">Returns a <code>Promise</code> that resolves when configuration is loaded, and fails if a fatal error is encountered.</p>
<h2><a class="anchor" id="autotoc_md15434"></a>
&lt;tt&gt;config.find(key)&lt;/tt&gt;</h2>
<p class="">Find the effective place in the configuration levels a given key is set. Returns one of: <code>cli</code>, <code>env</code>, <code>project</code>, <code>user</code>, <code>global</code>, <code>builtin</code>, or <code>default</code>.</p>
<p class="">Returns <code>null</code> if the key is not set.</p>
<h2><a class="anchor" id="autotoc_md15435"></a>
‘config.get(key, where = 'cli’)`</h2>
<p class="">Load the given key from the config stack.</p>
<h2><a class="anchor" id="autotoc_md15436"></a>
‘config.set(key, value, where = 'cli’)`</h2>
<p class="">Set the key to the specified value, at the specified level in the config stack.</p>
<h2><a class="anchor" id="autotoc_md15437"></a>
‘config.delete(key, where = 'cli’)`</h2>
<p class="">Delete the configuration key from the specified level in the config stack.</p>
<h2><a class="anchor" id="autotoc_md15438"></a>
&lt;tt&gt;config.validate(where)&lt;/tt&gt;</h2>
<p class="">Verify that all known configuration options are set to valid values, and log a warning if they are invalid.</p>
<p class="">If <code>where</code> is not set, then all config objects are validated.</p>
<p class="">Returns <code>true</code> if all configs are valid.</p>
<p class="">Note that it's usually enough (and more efficient) to just check <code>config.valid</code>, since each data object is marked for re-evaluation on every <code>config.set()</code> operation.</p>
<h2><a class="anchor" id="autotoc_md15439"></a>
&lt;tt&gt;config.save(where)&lt;/tt&gt;</h2>
<p class="">Save the config file specified by the <code>where</code> param. Must be one of <code>project</code>, <code>user</code>, <code>global</code>, <code>builtin</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
